# APPNICENAME=NFS
# APPDESCRIPTION=Access media directories and Docker config over NFS
services:
  nfs:
    container_name: nfs
    hostname: ${DOCKERHOSTNAME}
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-file: ${DOCKERLOGGING_MAXFILE}
        max-size: ${DOCKERLOGGING_MAXSIZE}
    privileged: true
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /lib/modules:/lib/modules:ro
      - ${DOCKERCONFDIR}:/nfs/configs
      - ${DOCKERSHAREDDIR}:/nfs/shared
      - ${DOWNLOADSDIR}:/nfs/downloads
      - ${MEDIADIR_AUDIOBOOKS}:/nfs/audiobooks
      - ${MEDIADIR_BOOKS}:/nfs/books
      - ${MEDIADIR_COMICS}:/nfs/comics
      - ${MEDIADIR_MOVIES}:/nfs/movies
      - ${MEDIADIR_MUSIC}:/nfs/music
      - ${MEDIADIR_TV}:/nfs/tv
    environment:
      - TZ=${TZ}
      - NFS_DISABLE_VERSION_3=1
      - NFS_EXPORT_1=/nfs ${NFS_IP_NETWORKS}(${NFS_OPTIONS})
    cap_add:
      - SYS_MODULE

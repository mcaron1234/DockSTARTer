# APPNICENAME=NFS
# APPDESCRIPTION=Access media directories and Docker config over NFS
services:
  nfs:
    container_name: nfs
    hostname: ${DOCKERHOSTNAME}
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-file: ${DOCKERLOGGING_MAXFILE}
        max-size: ${DOCKERLOGGING_MAXSIZE}
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - /lib/modules:/lib/modules:ro
      - ${DOCKERCONFDIR}:/configs
      - ${DOCKERSHAREDDIR}:/shared
      - ${DOWNLOADSDIR}:/downloads
      - ${MEDIADIR_AUDIOBOOKS}:/audiobooks
      - ${MEDIADIR_BOOKS}:/books
      - ${MEDIADIR_COMICS}:/comics
      - ${MEDIADIR_MOVIES}:/movies
      - ${MEDIADIR_MUSIC}:/music
      - ${MEDIADIR_TV}:/tv
    environment:
      - TZ=${TZ}
      - NFS_DISABLE_VERSION_3=1
      - NFS_EXPORT_1='/audiobooks ${NFS_IP_NETWORKS}(${NFS_OPTIONS})'
      - NFS_EXPORT_2='/books ${NFS_IP_NETWORKS}(${NFS_OPTIONS})'
      - NFS_EXPORT_3='/comics ${NFS_IP_NETWORKS}(${NFS_OPTIONS})'
      - NFS_EXPORT_4='/configs ${NFS_IP_NETWORKS}(${NFS_OPTIONS})'
      - NFS_EXPORT_5='/downloads ${NFS_IP_NETWORKS}(${NFS_OPTIONS})'
      - NFS_EXPORT_6='/movies ${NFS_IP_NETWORKS}(${NFS_OPTIONS})'
      - NFS_EXPORT_7='/music ${NFS_IP_NETWORKS}(${NFS_OPTIONS})'
      - NFS_EXPORT_8='/shared ${NFS_IP_NETWORKS}(${NFS_OPTIONS})'
      - NFS_EXPORT_9='/tv ${NFS_IP_NETWORKS}(${NFS_OPTIONS})'
    cap_add:
      - SYS_ADMIN
      - SYS_MODULE
